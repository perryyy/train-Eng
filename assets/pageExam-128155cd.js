import{d as P,l as q,a as G,b as a,e as i,f as n,w as r,m as T,h as m,k as H,n as j,i as p,_ as B,C as L,r as $,u as U,F,g as N,p as b,q as E,t as w,o as D,s as z,c as M,j as W,E as X}from"./index-fecfde27.js";import{T as Y}from"./topic-fbb8b7b5.js";const J={class:"actions"},K=P({__name:"actions",props:{isTestFinished:{type:Boolean,default:!1,required:!0}},emits:["handleSubmit","handleRestart"],setup(I,{emit:_}){const f=q(I,"isTestFinished"),h=G();function v(u){h.updateDialogStatus(u)}return(u,e)=>{const y=p("el-button");return a(),i("div",J,[n(y,{type:"warning",onClick:e[0]||(e[0]=S=>v(!0))},{default:r(()=>[T(" Back ")]),_:1}),n(y,{type:"primary",disabled:m(f),onClick:e[1]||(e[1]=S=>u.$emit("handleSubmit"))},{default:r(()=>[T(" Submit ")]),_:1},8,["disabled"]),m(f)?(a(),H(y,{key:0,type:"success",onClick:e[2]||(e[2]=S=>u.$emit("handleRestart"))},{default:r(()=>[T(" Restart ")]),_:1})):j("",!0)])}}});const Q=B(K,[["__scopeId","data-v-1ac31ad9"]]),Z={class:"fillInTheBlank"},ee=["onClick"],te={class:"card-header--text"},se={class:"card-header--icon"},oe={key:0,class:"errMsg"},ae={key:1,class:"answer"},ne={class:"correctAnswer"},ce=P({__name:"fillInTheBlank",props:{topicArr:{type:Array,required:!0}},emits:["emitResult","restart"],setup(I,{emit:_}){const f=q(I,"topicArr"),h=L.INPUT_MAX_LENGTH,v=$(!1),u=new SpeechSynthesisUtterance,e=$({}),y=o=>{u.text=o,speechSynthesis.speak(u)},S=U(),k=()=>{const o=f.value.length;let t=0;for(let c in e.value)e.value.hasOwnProperty(c)&&e.value[c].toLowerCase()===c.toLowerCase()&&t++;const s=b.calculateExamResults(o,t);v.value=!0,_("emitResult",s)},A=o=>{const t=`input-${o}`,s=document.getElementById(t);s&&s.focus()},O=()=>{b.openFullScreenLoading(),_("restart"),S.updateExamStart(!0),v.value=!1,e.value={},b.scrollToTop()};return(o,t)=>{const s=p("el-text"),c=p("VideoPlay"),g=p("el-icon"),x=p("el-input"),d=p("el-card");return a(),i("div",Z,[(a(!0),i(F,null,N(m(f),(l,C)=>(a(),i("div",{key:l.key,class:"question"},[n(d,{class:"box-card",width:"99.9%",shadow:"hover"},{header:r(()=>[E("div",{class:"card-header",onClick:V=>A(l.key)},[E("div",te,[n(s,{tag:"b"},{default:r(()=>[T(w(C+1)+" . "+w(l.value),1)]),_:2},1024)]),E("div",se,[n(g,{onClick:V=>y(l.key)},{default:r(()=>[n(c)]),_:2},1032,["onClick"])])],8,ee)]),default:r(()=>[n(x,{id:`input-${l.key}`,modelValue:e.value[l.key],"onUpdate:modelValue":V=>e.value[l.key]=V,modelModifiers:{trim:!0},placeholder:"Please input",class:"input-with-select",clearable:"",autofocus:"",disabled:v.value,maxlength:m(h)},null,8,["id","modelValue","onUpdate:modelValue","disabled","maxlength"]),e.value[l.key]&&e.value[l.key].length>=m(h)?(a(),i("div",oe,[n(s,{type:"danger"},{default:r(()=>[T("The input text length cannot exceed "+w(m(h))+" characters.",1)]),_:1})])):j("",!0),e.value[l.key]!==l.key&&v.value?(a(),i("div",ae,[T(" Answer : "),E("span",ne,w(l.key),1)])):j("",!0)]),_:2},1024)]))),128)),n(Q,{isTestFinished:v.value,onHandleSubmit:k,onHandleRestart:O},null,8,["isTestFinished"])])}}});const le=B(ce,[["__scopeId","data-v-1d4948a1"]]),re={class:"choice"},ue={class:"card-header"},de={class:"card-header--text"},ie={class:"choiceItems"},_e=P({__name:"choice",props:{topicArr:{type:Array,required:!0}},emits:["emitResult","restart"],setup(I,{emit:_}){const R=I,f=$([]),h=q(R,"topicArr").value,v=()=>{const o=h.map(t=>t.key);for(let t=0;t<h.length;t++){let s=[];for(s.push(h[t].key);s.length<L.CHOICE_OPTIONS_LENGTH;){const x=Math.floor(Math.random()*o.length),d=o[x];s.includes(d)||s.push(d)}const c={};s.forEach((x,d)=>{c[`item${d+1}`]=x});const g={[h[t].value]:b.shuffleObjectProperties(c)};f.value.push(g)}},u=$({}),e=$(!1),y=U(),S=()=>{const o=f.value.length;let t=0;for(const c in k)k.hasOwnProperty(c)&&u.value.hasOwnProperty(c)&&u.value[c].toString()===k[c]&&t++;const s=b.calculateExamResults(o,t);e.value=!0,_("emitResult",s)},k={};h.forEach(o=>{k[o.value]=o.key});const A=(o,t,s)=>(o&&!o.includes(s)||!o)&&k[t]===s,O=()=>{b.openFullScreenLoading(),_("restart"),y.updateExamStart(!0),e.value=!1,u.value={},b.scrollToTop()};return D(()=>{v()}),(o,t)=>{const s=p("el-text"),c=p("el-radio"),g=p("el-radio-group"),x=p("el-card");return a(),i("div",re,[(a(!0),i(F,null,N(f.value,(d,l)=>(a(),i("div",{key:l,class:"question"},[n(x,{class:"box-card",width:"99.9%",shadow:"hover"},{header:r(()=>[E("div",ue,[E("div",de,[n(s,{tag:"b"},{default:r(()=>[T(w(l+1)+" . "+w(Object.keys(d)[0]),1)]),_:2},1024)])])]),default:r(()=>[E("div",ie,[n(g,{modelValue:u.value[Object.keys(d)[0]],"onUpdate:modelValue":C=>u.value[Object.keys(d)[0]]=C},{default:r(()=>[(a(!0),i(F,null,N(d[Object.keys(d)[0]],(C,V)=>(a(),H(c,{key:V,label:C,disabled:e.value,border:e.value&&A(u.value[Object.keys(d)[0]],Object.keys(d)[0],C),name:"type"},null,8,["label","disabled","border"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue"])])]),_:2},1024)]))),128)),n(Q,{isTestFinished:e.value,onHandleSubmit:S,onHandleRestart:O},null,8,["isTestFinished"])])}}});const pe=B(_e,[["__scopeId","data-v-9126ade9"]]),he={class:"pageExam"},ve={key:0},me={key:0,class:"score"},fe={class:"card-header"},ye={key:1},ke={key:2},ge=P({__name:"pageExam",setup(I){const _=U(),R=_.selectedTopic,f=_.selectedQuestionType,h=_.selectedQuestionCount,v=Y[R],u=W();let e=z([]);D(()=>{v===void 0?(_.updateExamStart(!1),u.push("/train-Eng")):y()});const y=()=>{e=Object.keys(v).map(t=>({key:t,value:v[t]})),e=b.getRandomItemsFromArray(e,h),_.updateDataIsReady(!0)},S=M(()=>_.isExamStart),k=M(()=>_.dataIsReady),A=$([]),O=t=>{_.updateExamStart(!1);for(let s in t)t.hasOwnProperty(s)&&A.value.push({title:s,count:t[s]});b.scrollToTop(),X({title:"Success",message:"Exam is over",type:"success",showClose:!1})},o=()=>{A.value=[]};return(t,s)=>{const c=p("el-text"),g=p("el-card"),x=p("el-col"),d=p("el-row");return a(),i("div",he,[m(k)?(a(),i("div",ve,[m(S)?j("",!0):(a(),i("div",me,[n(d,{gutter:4},{default:r(()=>[(a(!0),i(F,null,N(A.value,(l,C)=>(a(),H(x,{key:C,md:4,lg:4,xl:4,xs:8,sm:8},{default:r(()=>[n(g,{class:"box-card"},{header:r(()=>[E("div",fe,[n(c,{tag:"b"},{default:r(()=>[T(w(l.title),1)]),_:2},1024)])]),default:r(()=>[n(c,{size:"large"},{default:r(()=>[T(w(l.count),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})])),m(f)===m(L).QUESTION_TYPE.CHOICE_QUESTION?(a(),i("div",ye,[n(pe,{topicArr:m(e),onRestart:o,onEmitResult:O},null,8,["topicArr"])])):(a(),i("div",ke,[n(le,{topicArr:m(e),onRestart:o,onEmitResult:O},null,8,["topicArr"])]))])):j("",!0)])}}});const Te=B(ge,[["__scopeId","data-v-22f1619f"]]);export{Te as default};
