import{d as P,l as q,a as G,b as n,e as i,f as a,w as r,m as T,h as m,k as H,n as j,i as p,_ as B,C as L,r as $,u as U,F,g as N,p as x,q as E,t as w,o as D,s as z,c as M,j as W,E as X}from"./index-ba344244.js";import{T as Y}from"./topic-fbb8b7b5.js";const J={class:"actions"},K=P({__name:"actions",props:{isTestFinished:{type:Boolean,default:!1,required:!0}},emits:["handleSubmit","handleRestart"],setup(I,{emit:_}){const f=q(I,"isTestFinished"),h=G();function v(u){h.updateDialogStatus(u)}return(u,e)=>{const y=p("el-button");return n(),i("div",J,[a(y,{type:"warning",onClick:e[0]||(e[0]=S=>v(!0))},{default:r(()=>[T(" Back ")]),_:1}),a(y,{type:"primary",disabled:m(f),onClick:e[1]||(e[1]=S=>u.$emit("handleSubmit"))},{default:r(()=>[T(" Submit ")]),_:1},8,["disabled"]),m(f)?(n(),H(y,{key:0,type:"success",onClick:e[2]||(e[2]=S=>u.$emit("handleRestart"))},{default:r(()=>[T(" Restart ")]),_:1})):j("",!0)])}}});const Q=B(K,[["__scopeId","data-v-8543565b"]]),Z={class:"fillInTheBlank"},ee=["onClick"],te={class:"card-header--text"},se={class:"card-header--icon"},oe={key:0,class:"errMsg"},ne={key:1,class:"answer"},ae={class:"correctAnswer"},ce=P({__name:"fillInTheBlank",props:{topicArr:{type:Array,required:!0}},emits:["emitResult","restart"],setup(I,{emit:_}){const f=q(I,"topicArr"),h=L.INPUT_MAX_LENGTH,v=$(!1),u=new SpeechSynthesisUtterance,e=$({}),y=o=>{u.text=o,speechSynthesis.speak(u)},S=U(),k=()=>{const o=f.value.length;let t=0;for(let c in e.value)e.value.hasOwnProperty(c)&&e.value[c].toLowerCase()===c.toLowerCase()&&t++;const s=x.calculateExamResults(o,t);v.value=!0,_("emitResult",s)},A=o=>{const t=`input-${o}`,s=document.getElementById(t);s&&s.focus()},O=()=>{x.openFullScreenLoading(),_("restart"),S.updateExamStart(!0),v.value=!1,e.value={},x.scrollToTop()};return(o,t)=>{const s=p("el-text"),c=p("VideoPlay"),b=p("el-icon"),g=p("el-input"),d=p("el-card");return n(),i("div",Z,[(n(!0),i(F,null,N(m(f),(l,C)=>(n(),i("div",{key:l.key,class:"question"},[a(d,{class:"box-card",width:"99.9%",shadow:"hover"},{header:r(()=>[E("div",{class:"card-header",onClick:V=>A(l.key)},[E("div",te,[a(s,{tag:"b"},{default:r(()=>[T(w(C+1)+" . "+w(l.value),1)]),_:2},1024)]),E("div",se,[a(b,{onClick:V=>y(l.key)},{default:r(()=>[a(c)]),_:2},1032,["onClick"])])],8,ee)]),default:r(()=>[a(g,{id:`input-${l.key}`,modelValue:e.value[l.key],"onUpdate:modelValue":V=>e.value[l.key]=V,modelModifiers:{trim:!0},placeholder:"Please input",class:"input-with-select",clearable:"",autofocus:"",disabled:v.value,maxlength:m(h)},null,8,["id","modelValue","onUpdate:modelValue","disabled","maxlength"]),e.value[l.key]&&e.value[l.key].length>=m(h)?(n(),i("div",oe,[a(s,{type:"danger"},{default:r(()=>[T("The input text length cannot exceed "+w(m(h))+" characters.",1)]),_:1})])):j("",!0),e.value[l.key]!==l.key&&v.value?(n(),i("div",ne,[T(" Answer : "),E("span",ae,w(l.key),1)])):j("",!0)]),_:2},1024)]))),128)),a(Q,{isTestFinished:v.value,onHandleSubmit:k,onHandleRestart:O},null,8,["isTestFinished"])])}}});const le=B(ce,[["__scopeId","data-v-e586430c"]]),re={class:"choice"},ue={class:"card-header"},de={class:"card-header--text"},ie={class:"choiceItems"},_e=P({__name:"choice",props:{topicArr:{type:Array,required:!0}},emits:["emitResult","restart"],setup(I,{emit:_}){const R=I,f=$([]),h=q(R,"topicArr").value,v=()=>{const o=h.map(t=>t.key);for(let t=0;t<h.length;t++){let s=[];for(s.push(h[t].key);s.length<L.CHOICE_OPTIONS_LENGTH;){const g=Math.floor(Math.random()*o.length),d=o[g];s.includes(d)||s.push(d)}const c={};s.forEach((g,d)=>{c[`item${d+1}`]=g});const b={[h[t].value]:x.shuffleObjectProperties(c)};f.value.push(b)}},u=$({}),e=$(!1),y=U(),S=()=>{const o=f.value.length;let t=0;for(const c in k)k.hasOwnProperty(c)&&u.value.hasOwnProperty(c)&&u.value[c].toString()===k[c]&&t++;const s=x.calculateExamResults(o,t);e.value=!0,_("emitResult",s)},k={};h.forEach(o=>{k[o.value]=o.key});const A=(o,t,s)=>(o&&!o.includes(s)||!o)&&k[t]===s,O=()=>{x.openFullScreenLoading(),_("restart"),y.updateExamStart(!0),e.value=!1,u.value={},x.scrollToTop()};return D(()=>{v()}),(o,t)=>{const s=p("el-text"),c=p("el-radio"),b=p("el-radio-group"),g=p("el-card");return n(),i("div",re,[(n(!0),i(F,null,N(f.value,(d,l)=>(n(),i("div",{key:l,class:"question"},[a(g,{class:"box-card",width:"99.9%",shadow:"hover"},{header:r(()=>[E("div",ue,[E("div",de,[a(s,{tag:"b"},{default:r(()=>[T(w(l+1)+" . "+w(Object.keys(d)[0]),1)]),_:2},1024)])])]),default:r(()=>[E("div",ie,[a(b,{modelValue:u.value[Object.keys(d)[0]],"onUpdate:modelValue":C=>u.value[Object.keys(d)[0]]=C},{default:r(()=>[(n(!0),i(F,null,N(d[Object.keys(d)[0]],(C,V)=>(n(),H(c,{key:V,label:C,disabled:e.value,border:e.value&&A(u.value[Object.keys(d)[0]],Object.keys(d)[0],C),name:"type"},null,8,["label","disabled","border"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue"])])]),_:2},1024)]))),128)),a(Q,{isTestFinished:e.value,onHandleSubmit:S,onHandleRestart:O},null,8,["isTestFinished"])])}}});const pe=B(_e,[["__scopeId","data-v-2e1689d0"]]),he={class:"pageExam"},ve={key:0},me={key:0,class:"score"},fe={class:"card-header"},ye={key:1},ke={key:2},be=P({__name:"pageExam",setup(I){const _=U(),R=_.selectedTopic,f=_.selectedQuestionType,h=_.selectedQuestionCount,v=Y[R],u=W();let e=z([]);D(()=>{v===void 0?(_.updateExamStart(!1),u.push("/train-Eng")):y()});const y=()=>{e=Object.keys(v).map(t=>({key:t,value:v[t]})),e=x.getRandomItemsFromArray(e,h),_.updateDataIsReady(!0)},S=M(()=>_.isExamStart),k=M(()=>_.dataIsReady),A=$([]),O=t=>{_.updateExamStart(!1);for(let s in t)t.hasOwnProperty(s)&&A.value.push({title:s,count:t[s]});x.scrollToTop(),X({title:"Success",message:"Exam is over",type:"success",showClose:!1})},o=()=>{A.value=[]};return(t,s)=>{const c=p("el-text"),b=p("el-card"),g=p("el-col"),d=p("el-row");return n(),i("div",he,[m(k)?(n(),i("div",ve,[m(S)?j("",!0):(n(),i("div",me,[a(d,{gutter:4},{default:r(()=>[(n(!0),i(F,null,N(A.value,(l,C)=>(n(),H(g,{key:C,md:4,lg:4,xl:4,xs:8,sm:8},{default:r(()=>[a(b,{class:"box-card"},{header:r(()=>[E("div",fe,[a(c,{tag:"b"},{default:r(()=>[T(w(l.title),1)]),_:2},1024)])]),default:r(()=>[a(c,{size:"large"},{default:r(()=>[T(w(l.count),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})])),m(f)===m(L).QUESTION_TYPE.CHOICE_QUESTION?(n(),i("div",ye,[a(pe,{topicArr:m(e),onRestart:o,onEmitResult:O},null,8,["topicArr"])])):(n(),i("div",ke,[a(le,{topicArr:m(e),onRestart:o,onEmitResult:O},null,8,["topicArr"])]))])):j("",!0)])}}});const Te=B(be,[["__scopeId","data-v-ea0bc1fb"]]);export{Te as default};
